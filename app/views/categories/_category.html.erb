<div id="<%= dom_id category %>">
  <div class="flex items-center mb-3">
    <div class="text-base font-medium flex-1 min-w-[70%]">
      <%= category.name %>
    </div>
    <span class="text-sm font-medium grow-0 min-w-[15%] text-right">
      <div class="flex items-center">
         <%= text_field :assignment, :amount,
            'data-controller' => "assignment",
            'data-assignment-target' => "source",
            'data-action' => "change->assignment#apply",
            'data-assignment-url-value' => monthly_assignment_url(category.assignment_for_month(@current_month)),
            class: 'w-full rounded-md border-0 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-right '
          %>
        <div class='ml-3'>
          <%= currency_symbol %>
        </div>
      </div>
    </span>
    <span class="text-sm font-medium grow-0 min-w-[15%] text-right">
      <%= humanized_money_with_symbol category.spent_amount_in_month(@current_month) %>
    </span>
  </div>
  <div class="flex items-center">
    <div class="flex-1">
      <div class="mb-3 bg-gray-200 rounded-full dark:bg-gray-700">
        <div class="bg-green-600 rounded-full dark:bg-green-500 text-white text-center h-4 <%= category.overspent?(@current_month) ? "bg-red-400 dark:bg-red-400" : ""%>"
             style="width: <%= 100.0 - category.spent_percentage_in_month(@current_month) %>%">
        </div>
      </div>
    </div>
  </div>
  <div class="flex items-center justify-start mb-3">
    <div class="text-sm text-left text-gray-600 font-medium flex-1 min-w-[70%]">
      <span> Spent <%= humanized_money_with_symbol category.spent_amount_in_month(@current_month) %> of <%= humanized_money_with_symbol category.assigned_amount_in(@current_month) %></span>
      <div> Target <%= humanized_money_with_symbol category.target_amount %></div>
    </div>
    <div class="text-sm font-medium grow-0 min-w-[15%] text-right text-gray-600">
      <% if category.overspent?(@current_month) %>
        <p>Overspent</p>
      <% elsif category.funded?(@current_month) %>
        <p>Funded</p>
      <% else %>
        <p>Needs Funding</p>
      <% end %>
    </div>
  </div>
</div>
